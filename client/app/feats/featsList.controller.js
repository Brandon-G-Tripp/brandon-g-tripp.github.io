"use strict";System.register(["angular","lodash","./feats.json!","./featPrereqOutput"],function(_export,_context){function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}var angular,feats,featPrereqOutput,FeatsListCtrl;return{setters:[function(_angular){angular=_angular["default"]},function(_lodash){},function(_featsJson){feats=_featsJson["default"]},function(_featPrereqOutput){featPrereqOutput=_featPrereqOutput["default"]}],execute:function(){FeatsListCtrl=function(){function FeatsListCtrl($scope,$sce,$state,$mdMedia,Config,Link){_classCallCheck(this,FeatsListCtrl),this.$scope=$scope,this.$scope.$mdMedia=$mdMedia,this.Config=Config,this.Link=Link,this.featPrereqOutput=featPrereqOutput,this.powers=[],this.powers=feats,this.attributes=["All","Alteration","Creation","Fortitude","Energy","Entropy","Movement","Influence","Prescience","Protection"],this.selectedPowers=[],this.selectedAttributes=["All"],this.searchQuery="",this.attackAttrSearchText="",this.powerLevelValue=1,this.powerComparator="gte"}return _createClass(FeatsListCtrl,[{key:"updateSearchTextModel",value:function(val){this.attackAttrSearchText=val}},{key:"attackAttrSearchFilter",value:function(){return function(item){return!0}}},{key:"textSearchFilter",value:function(){var _this2=this;return function(thisPower){var item=thisPower;if(""===_this2.searchQuery&&_.includes(_this2.selectedAttributes,"All"))return!0;var regex=new RegExp(_this2.searchQuery,"gi"),show=!1,inAttackFilter=!0;if(show=item.name.match(regex)||item.description.match(regex)||item.effect.match(regex),_this2.selectedAttributes.length>0){var inAttackFilter=!1;if(_this2.selectedAttributes.indexOf("All")!==-1)inAttackFilter=!0;else var searchAttrs=angular.copy(_this2.selectedAttributes),inAttackFilter=_.intersection(item.attribute,searchAttrs).length>0}return show&&inAttackFilter}}},{key:"powerLevelFilter",value:function(){var _this3=this;return function(thisPower){for(var item=thisPower,include=!1,i=0;i<=item.cost.length;i++)switch(_this3.powerComparator){case"gte":item.cost[i]>=parseInt(_this3.powerLevelValue)&&(include=!0);break;case"eq":item.cost[i]===parseInt(_this3.powerLevelValue)&&(include=!0);break;case"lte":item.cost[i]<=parseInt(_this3.powerLevelValue)&&(include=!0)}return include}}},{key:"getCost",value:function(costs){var output="";return costs.length>1?(costs.splice(costs.length-1,1," or "+costs.length),costs.forEach(function(cost,i){output+="".concat(cost).concat(i!==costs.length-1?", ":" points")}),output):"".concat(costs[0]," ").concat(costs[0]>1?"points":"point")}}]),FeatsListCtrl}(),_export("default",FeatsListCtrl)}}});