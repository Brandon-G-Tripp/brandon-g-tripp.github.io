{"version":3,"sources":["app/feats/featPrereqOutput.js"],"names":[],"mappings":"AAAA,OAAO,SAAS,CAAC,WAAW,UAAU,SAAS;EAC7C,OAAO;IACL,SAAS,CAAC,UAAU,SAAS;IAC7B,SAAS,YAAY;MACnB;;MAEA,QAAQ,WAJC,UAAU,SAAS;QAChC,IAAI,SAAS;QACb,IAAI,gBAAgB;QACpB,IAAI,oBAAoB;;QAGxB,SAAS,kBAAmB,KAAK,OAAO;UACtC,IAAM,cAAc,IAAI,IAAK,UAAC,MAAM,GAAM;YACxC,IAAM,UAAU,OAAO,KAAK,MAAM;YAClC,IAAK,OAAQ;cACX,QAAQ,IAAG,SAAS,UAAO,MAAM,KAAK,WAAQ;cAC9C,OAAA,SAAe,UAAO,MAAM,KAAK,WAAQ;mBACpC;cACL,OAAO,MAAQ,IAAI,SAAS,IAAC,MAAS,IAAI,SAAS,IAAI,SAAS,MAAE,KAAI,UAAO,MAAM,KAAK,WAAQ,KAAU;;;UAI9G,OAAO,QAAU,YAAY,KAAK,MAAM;;;QAG1C,SAAS,kBAAmB,iBAAiB,QAAQ,KAAK,OAAO;;UAE/D,IAAI,cAAc;;UAElB,IAAK,QAAQ,aAAc;YACzB,eAAe,kBAAkB,QAAQ,QAAQ;iBAC5C,IAAK,QAAQ,kBAAmB;YACrC,eAAe;YACf,eAAe,kBAAmB,QAAQ,QAAQ,MAAM;YACxD,eAAe;iBACV,IAAK,QAAQ,QAAS;YAC3B,eAAe,QAAQ,QAAQ,OAAO;iBACjC,IAAK,QAAQ,iBAAkB;;YAEpC,OAAO,KAAM,QAAQ,QAAQ,MAAO,QAAS,UAAC,QAAQ,aAAgB;cACpE,IAAK,aAAa,eAAe;cACjC,IAAK,WAAW,aAAc;gBAC5B,eAAe,kBAAmB,QAAQ,QAAQ,KAAK;qBAClD,IAAK,WAAW,QAAS;gBAC9B,eAAW,KAAQ,QAAQ,QAAQ,KAAK,UAAO;;;iBAG9C,IAAK,QAAQ,SAAU;YAC5B,eAAe,QAAQ,QAAQ,KAAK;;;UAGtC,OAAO;;;QAGT,OAAO,KAAK,SAAS,QAAS,UAAA,KAAO;UACnC,cAAc,KAAK,QAAQ;;QAE7B,gBAAgB,EAAE,SAAS,eAAe,EAAE;;QAE5C,IAAK,OAAO,KAAK,SAAS,SAAS,cAAc,QAAS;UACxD,oBAAoB;;;QAGtB,OAAO,KAAK,SAAS,QAAS,UAAC,QAAQ,GAAM;;UAE3C,IAAM,aAAa,OAAO,KAAK,QAAQ;UACvC,IAAM,kBAAkB;;UAExB,IAAK,mBAAoB;YACvB,IAAI,WAAW;;YAEf,IAAK,MAAM,GAAI;cACb,YAAQ,kBAAqB,OAAO,MAAM,QAAQ;mBAC7C,IAAK,MAAM,OAAO,KAAK,SAAS,SAAS,GAAG;cACjD,YAAQ,QAAW,OAAO,MAAM,QAAQ,KAAE;cAC1C,YAAY,kBAAkB,iBAAiB,QAAQ,gBAAgB,IAAI;;;YAG7E,UAAU;;;UAGZ,IAAK,qBAAuB,MAAM,OAAO,KAAK,SAAS,SAAS,GAAK;;UAErE,IAAK,CAAC,mBAAoB,UAAU;;UAGpC,IAAK,CAAC,qBAAsB,qBAAuB,MAAM,OAAO,KAAK,SAAS,SAAS,GAAQ;YAC7F,WAAW,QAAS,UAAC,KAAK,GAAM;;cAE9B,IAAK,MAAM,GAAI;gBACb,UAAM,kBAAqB,OAAO,MAAM,QAAQ,KAAE;;;cAGpD,IAAK,gBAAgB,SAAS,KAAK,MAAM,GAAI;gBAC3C,UAAM;;;cAIR,IAAK,gBAAgB,SAAS,GAAI;gBAChC,UAAM;;;cAGR,UAAU,kBAAkB,iBAAiB,QAAQ,KAAK;;cAE1D,IAAK,gBAAgB,SAAS,KAAK,IAAI,GAAI;gBACzC,UAAM;;;cAGR,IAAK,gBAAgB,SAAS,KAAK,MAAM,gBAAgB,SAAQ,GAAK;gBACpE,UAAM;;;;UAKZ,UAAU;;;QAGZ,OAAO;;;;GAGN","file":"app/feats/featPrereqOutput.js","sourcesContent":["import 'lodash';\n\nexport default function (prereqs) {\n  let output = '';\n  let uniquePrereqs = []\n  let suppressIteration = false;\n\n\n  function processAttrPrereq (arr, multi) {\n    const attrStrings = arr.map( (attr, x) => {\n      const attrKey = Object.keys(attr)[0];\n      if ( multi ) {\n        console.log(`<li>${ attrKey } ${ attr[attrKey] }</li>`)\n        return `<li>${ attrKey } ${ attr[attrKey] }</li>`;\n      } else {\n        return ( x === arr.length - 1 ) ? `${ arr.length > 1 ? ' or ' : ''}${ attrKey } ${ attr[attrKey] }` : `${ attrKey }`;\n      }\n\n    });\n    return (multi) ? attrStrings.join('') : attrStrings;\n  }\n\n  function processPrereqTier (localPrereqKeys, prereq, key, index) {\n\n    let prereqTiers = '';\n\n    if ( key === 'Attribute' ) {\n      prereqTiers += processAttrPrereq(prereqs[prereq][key]);\n    } else if ( key === 'MultiAttribute' ) {\n      prereqTiers += '<ul>';\n      prereqTiers += processAttrPrereq( prereqs[prereq][key], true);\n      prereqTiers += '</ul>';\n    } else if ( key === 'Feat' ) {\n      prereqTiers += prereqs[prereq][key] + ' feat';\n    } else if ( key === 'FeatAttribute' ) {\n      // this is always guaranteed to be an array of attributes\n      Object.keys( prereqs[prereq][key] ).forEach( (subKey, subKeyIndex) => {\n        if ( subKeyIndex) prereqTiers += ', OR '\n        if ( subKey === 'Attribute' ) {\n          prereqTiers += processAttrPrereq( prereqs[prereq][key][subKey]);\n        } else if ( subKey === 'Feat' ) {\n          prereqTiers += `${ prereqs[prereq][key][subKey] } feat`;\n        }\n      });\n    } else if ( key === 'Other' ) {\n      prereqTiers += prereqs[prereq][key][index];\n    }\n\n    return prereqTiers;\n  }\n\n  Object.keys(prereqs).forEach( key => {\n    uniquePrereqs.push(prereqs[key]);\n  });\n  uniquePrereqs = _.uniqWith(uniquePrereqs, _.isEqual);\n\n  if ( Object.keys(prereqs).length > uniquePrereqs.length ) {\n    suppressIteration = true;\n  }\n\n  Object.keys(prereqs).forEach( (prereq, x) => {\n\n    const prereqKeys = Object.keys(prereqs[prereq]);\n    const localPrereqKeys = prereqKeys;\n\n    if ( suppressIteration ) {\n      let tierList = '';\n\n      if ( x === 0 ) {\n        tierList += `<strong>Tier ${ prereq.split('tier')[1] }`;\n      } else if ( x === Object.keys(prereqs).length - 1) {\n        tierList += ` - ${ prereq.split('tier')[1] }:</strong> `;\n        tierList += processPrereqTier(localPrereqKeys, prereq, localPrereqKeys[0], 0);\n      }\n\n      output += tierList;\n    }\n\n    if ( suppressIteration && ( x === Object.keys(prereqs).length - 1 )) return;\n\n    if ( !suppressIteration ) output += '<li>';\n\n\n    if ( !suppressIteration || (suppressIteration && ( x === Object.keys(prereqs).length - 1 ) ) ) {\n      prereqKeys.forEach( (key, z) => {\n\n        if ( z === 0 ) {\n          output += `<strong>Tier ${ prereq.split('tier')[1] }</strong>: `;\n        }\n\n        if ( localPrereqKeys.length > 1 && z === 0 ) {\n          output += `<ul>`;\n        }\n\n\n        if ( localPrereqKeys.length > 1 ) {\n          output += `<li>`;\n        }\n\n        output += processPrereqTier(localPrereqKeys, prereq, key, z);\n\n        if ( localPrereqKeys.length > 1 && z > 0 ) {\n          output += `</li>`;\n        }\n\n        if ( localPrereqKeys.length > 1 && z === localPrereqKeys.length -1  ) {\n          output += `</ul>`;\n        }\n\n      });\n    }\n    output += '</li>';\n  });\n\n  return output;\n}\n"],"sourceRoot":"/source/"}