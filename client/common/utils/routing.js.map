{"version":3,"sources":["common/utils/routing.js"],"names":["futureRoutes","routing","module","requires","push","RouterConfig","$stateProvider","$futureStateProvider","stateFactory","$q","$ocLazyLoad","futureState","def","defer","System","import","src","then","loaded","newModule","name","key","Object","keys","load","resolve","promise","forEach","r"],"mappings":"AAAA;;AAEA,OAAO,SAAS,CAAC,oBAAoB,qBAAqB,UAAU,SAAS,UAAU;EACrF;;EAEA,IAAI,cAAc;EAClB,OAAO;IACL,SAAS,CAAC,UAAU,gBAAgB;MAPjCA,eAQc,eAAe;OAC7B,UAAU,iBAAiB;IAC9B,SAAS,YAAY;MACnB,QAAQ,WARHC,UAAU,SAAVA,QAAmBC,QAAQ;QAEpCA,OAAOC,SAASC,KAAK;QAErB,IAAIC,eAAe,CAAC,kBAAkB,wBAAwB,UAAUC,gBAAgBC,sBAAsB;UAE5GA,qBAAqBC,aAAa,QAAQ,CAAC,MAAM,eAAe,eAAe,UAASC,IAAIC,aAAaC,aAAa;YACpH,IAAIC,MAAMH,GAAGI;YAEbC,OAAOC,OAAOJ,YAAYK,KAAKC,KAAK,UAAAC,QAAU;cAC5C,IAAIC,YAAYD;;cAChB,IAAI,CAACA,OAAOE,MAAM;gBAChB,IAAIC,MAAMC,OAAOC,KAAKL;gBACtBC,YAAYD,OAAOG,IAAI;;;cAGzBX,YAAYc,KAAKL,WAAWF,KAAK,YAAW;gBAC1CL,IAAIa;;;YAIR,OAAOb,IAAIc;;UAGb1B,aAAa2B,QAAQ,UAASC,GAAG;YAC/BrB,qBAAqBI,YAAYiB;;;QAKrC,OAAOvB;;;;GAKN","file":"routing.js","sourcesContent":["import futureRoutes from 'app/routes.json!';\nimport 'ui-router-extras';\n\nexport var routing = function(module) {\n\n  module.requires.push('ct.ui.router.extras.future');\n\n  var RouterConfig = ['$stateProvider', '$futureStateProvider', function ($stateProvider, $futureStateProvider) {\n\n    $futureStateProvider.stateFactory('load', ['$q', '$ocLazyLoad', 'futureState', function($q, $ocLazyLoad, futureState) {\n      var def = $q.defer();\n\n      System.import(futureState.src).then(loaded => {\n        var newModule = loaded;\n        if (!loaded.name) {\n          var key = Object.keys(loaded);\n          newModule = loaded[key[0]];\n        }\n\n        $ocLazyLoad.load(newModule).then(function() {\n          def.resolve();\n        });\n      });\n\n      return def.promise;\n    }]);\n\n    futureRoutes.forEach(function(r) {\n      $futureStateProvider.futureState(r);\n    });\n\n  }];\n\n  return RouterConfig;\n};\n"]}