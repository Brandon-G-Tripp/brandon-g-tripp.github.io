{"version":3,"sources":["common/directives/loginComponent/loginComponent.controller.js"],"names":["angular","authService","loginComponentControllerModule","module","name","LoginComponentCtrl","$state","$animate","Auth","loginForm","user","email","password","errors","$valid","$submitted","login","username","then","go","reload","catch","err","code","controller"],"mappings":"AAAA;;AAEA,OAAO,SAAS,CAAC,WAAW,qBAAqB,oBAAoB,iCAAiC,UAAU,SAAS,UAAU;EACjI;;EAEA,IAAI,SAAS,aAAa,gCAAgC;;EAE1D,SAAS,gBAAgB,UAAU,aAAa,EAAE,IAAI,EAAE,oBAAoB,cAAc,EAAE,MAAM,IAAI,UAAU;;EAEhH,SAAS,kBAAkB,QAAQ,OAAO,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,MAAM,QAAQ,KAAK,EAAE,IAAI,aAAa,MAAM,IAAI,WAAW,aAAa,WAAW,cAAc,OAAO,WAAW,eAAe,MAAM,IAAI,WAAW,YAAY,WAAW,WAAW,MAAM,OAAO,eAAe,QAAQ,WAAW,KAAK;;EAE7S,SAAS,aAAa,aAAa,YAAY,aAAa,EAAE,IAAI,YAAY,kBAAkB,YAAY,WAAW,aAAa,IAAI,aAAa,kBAAkB,aAAa,cAAc,OAAO;;EAEzM,OAAO;IACL,SAAS,CAAC,UAAU,UAAU;MAZ3BA,UAaS,SAAS;OAClB,UAAU,kBAAkB,IAAI,UAAU,kBAAkB,IAAI,UAAU,4BAA4B;MAXtGC,cAYa,2BAA2B;;IAE3C,SAAS,YAAY;MAZnBC,iCAAiCF,QAAQG,OAAO,gCAAgC,CACpFF,YAAYG,MACZ,aACA;;MAGIC;;MAWA,YAAY;QAVhB,SAAA,mBAAaC,QAAQC,UAAUC,MAAM;UAAA,gBAAA,MAAA;;UACnC,KAAKF,SAASA;UAEd,KAAKE,OAAOA;UAEZ,KAAKC,YAAY;UACjB,KAAKC,OAAO;UACZ,KAAKA,KAAKC,QAAQ;UAClB,KAAKD,KAAKE,WAAW;UACrB,KAAKC,SAAS;;;;QAeV,aAAa,oBAAoB,CAAC;UAChC,KAAK;UACL,OAAO,SAAS,QAbf;YAAA,IAAA,QAAA;;YACP,IAAG,KAAKJ,UAAUK,UAAU,CAAC,KAAKL,UAAUM,YAAY;cAEtD,KAAKN,UAAUM,aAAa;cAE5B,KAAKP,KAAKQ,MAAM;gBACdC,UAAU,KAAKP,KAAKC;gBACpBC,UAAU,KAAKF,KAAKE;iBAErBM,KAAM,YAAM;;gBAEX,MAAKZ,OAAOa,GAAG,WAAW,MAAM;kBAAEC,QAAQ;;;gBAC1C,IAAK,MAAKX,WAAY;kBACpB,MAAKA,UAAUM,aAAa;;iBAG/BM,MAAO,UAACC,KAAQ;gBACf,IAAKA,OAAOA,IAAIC,MAAO;kBACrB,MAAKV,OAAOS,IAAIC,QAAQD;;;gBAE1B,IAAK,MAAKb,WAAY;kBACpB,MAAKA,UAAUM,aAAa;;;;;;;QAsB9B,OAAO;;;MAffb,+BAA+BsB,WAAW,sBAAsB,CAAC,UAAU,YAAY,QAAQnB;;MAoBzF,QAAQ,WAlBCH;;;GAqBZ","file":"loginComponent.controller.js","sourcesContent":["'use strict';\n\nimport angular from 'angular';\nimport 'angular-ui-router';\nimport 'angular-messages';\nimport authService from 'common/services/auth.service';\n\nconst loginComponentControllerModule = angular.module('loginComponent.controller.js', [\n  authService.name,\n  'ui.router',\n  'ngMessages'\n]);\n\nclass LoginComponentCtrl {\n  constructor ($state, $animate, Auth) {\n    this.$state = $state;\n\n    this.Auth = Auth;\n\n    this.loginForm = {};\n    this.user = {};\n    this.user.email = '';\n    this.user.password = '';\n    this.errors = {};\n  }\n  // public methods\n\n  login () {\n    if(this.loginForm.$valid && !this.loginForm.$submitted) {\n\n      this.loginForm.$submitted = true;\n\n      this.Auth.login({\n        username: this.user.email,\n        password: this.user.password\n      })\n      .then( () => {\n        // Logged in, redirect to home\n        this.$state.go('content', null, { reload: true });\n        if ( this.loginForm ) {\n          this.loginForm.$submitted = false;\n        }\n      })\n      .catch( (err) => {\n        if ( err && err.code ) {\n          this.errors[err.code] = err;\n        }\n        if ( this.loginForm ) {\n          this.loginForm.$submitted = false;\n        }\n      });\n    }\n  }\n}\n\nloginComponentControllerModule.controller('LoginComponentCtrl', ['$state', '$animate', 'Auth', LoginComponentCtrl ]);\n\nexport default loginComponentControllerModule;\n"]}