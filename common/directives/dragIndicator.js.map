{"version":3,"sources":["common/directives/dragIndicator.js"],"names":["angular","dragIndicatorDirective","module","directive","restrict","controller","$scope","$document","$element","dropTarget","$body","find","showDrag","timeout","bind","addClass","clearTimeout","setTimeout","removeClass","$on","unbind"],"mappings":"AAAA;;AAEA,OAAO,SAAS,CAAC,YAAY,UAAU,SAAS,UAAU;EACxD;;EAEA,IAAI,SAAS;EACb,OAAO;IACL,SAAS,CAAC,UAAU,UAAU;MAP3BA,UAQS,SAAS;;IAErB,SAAS,YAAY;MARnBC,yBAAyBD,QAAQE,OAAO,oBAAoB;MAElED,uBAAuBE,UAAU,iBAAiB,YAAY;QAE5D,OAAO;UACLC,UAAU;UACVC,gDAAY,SAAA,WAAUC,QAAQC,WAAWC,UAAU;YAEjD,IAAMC,aAAaD;YACnB,IAAME,QAAQH,UAAUI,KAAK;YAC7B,IAAIC,WAAW;YACf,IAAIC,UAAU,CAAC;;YAEfH,MAAMI,KAAK,uBAAuB,YAAY;cAC1CL,WAAWM,SAAS;cACpBL,MAAMK,SAAS;cACfH,WAAW;;YAEfF,MAAMI,KAAK,YAAY,YAAU;cAC7BF,WAAW;;YAEfF,MAAMI,KAAK,kBAAkB,YAAY;cACvCF,WAAW;cACXI,aAAcH;;cAEdA,UAAUI,WAAY,YAAU;gBAC9B,IAAI,CAACL,UAAU;kBACbH,WAAWS,YAAY;kBACvBR,MAAMQ,YAAY;;iBAEnB;;YAGLZ,OAAOa,IAAI,YAAY,YAAY;;cAEjCT,MAAMU,OAAO;;;;;;MAWf,QAAQ,WAHCnB;;;GAMZ","file":"dragIndicator.js","sourcesContent":["import angular from 'angular';\n\nconst dragIndicatorDirective = angular.module('dragIndicator.js', []);\n\ndragIndicatorDirective.directive('dragIndicator', function () {\n\n  return {\n    restrict: 'EA',\n    controller: function ($scope, $document, $element) {\n\n      const dropTarget = $element;\n      const $body = $document.find('body');\n      let showDrag = false;\n      let timeout = -1;\n      // $body.addClass('file-dragging');\n      $body.bind('dragstart dragenter', function () {\n          dropTarget.addClass('dragging-target');\n          $body.addClass('file-dragging');\n          showDrag = true;\n      });\n      $body.bind('dragover', function(){\n          showDrag = true;\n      });\n      $body.bind('dragleave drop', function () {\n        showDrag = false;\n        clearTimeout( timeout );\n        // remove the dragging classes on a timeout to prevent UI flicker\n        timeout = setTimeout( function(){\n          if( !showDrag ){\n            dropTarget.removeClass('dragging-target');\n            $body.removeClass('file-dragging');\n          }\n        }, 100 );\n      });\n\n      $scope.$on('$destroy', function () {\n        // prevent memory leaks by cleaning up event bindings\n        $body.unbind('dragenter dragover dragleave drop');\n      });\n\n    }\n  };\n\n});\n\nexport default dragIndicatorDirective;\n"]}